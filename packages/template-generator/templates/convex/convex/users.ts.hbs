import { query } from './_generated/server'
import { auth } from './auth'

// Get current user from Better Auth session
export const current = query({
  args: {},
  handler: async (ctx) => {
    const session = await auth.getSession(ctx)
    if (!session) return null
    return session.user
  },
})

// Alias for current user - used by dashboard components
export const viewer = query({
  args: {},
  handler: async (ctx) => {
    const session = await auth.getSession(ctx)
    if (!session) return null
    return session.user
  },
})
